<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Register — Magnus Platform</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: '#F97316',
            brand2: '#F59E0B',
            ink: '#0B1220',
            surface: '#0F172A',
            accent: '#10B981',
          },
          boxShadow: {
            goldGlow: '0 24px 80px rgba(245, 158, 11, .35)',
            card: '0 10px 30px rgba(0,0,0,.10)'
          },
          borderRadius: { '2-5xl': '1.35rem' },
          keyframes: {
            shine: { '0%':{transform:'translateX(-160%) skewX(-15deg)'},
                     '100%':{transform:'translateX(260%) skewX(-15deg)'} },
            reveal: { '0%':{opacity:0,transform:'translateY(16px) scale(.98)'},
                      '100%':{opacity:1,transform:'translateY(0) scale(1)'} }
          },
          animation: {
            reveal: 'reveal .6s cubic-bezier(.2,.7,.2,1) both',
            shine: 'shine 1.8s ease-in-out infinite'
          }
        }
      }
    }
  </script>

  <style>
    :root { color-scheme: dark; }
    html{scroll-behavior:smooth}
    body{
      min-height:100dvh;
      background:
        radial-gradient(60rem 60rem at 85% 10%, rgba(249,115,22,.18), transparent 55%),
        radial-gradient(60rem 60rem at 10% 85%, rgba(245,158,11,.14), transparent 55%),
        #0F172A;
      color:#fff;
    }
    .glass{
      background: linear-gradient(135deg, rgba(255,255,255,.14), rgba(255,255,255,.06));
      border: 1px solid rgba(255,255,255,.18);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      border-radius: 1.25rem;
    }
    .pill{ border:1px solid rgba(255,255,255,.22); background:rgba(255,255,255,.07); }
    .sparkle::before{
      content:""; position:absolute; inset:0; pointer-events:none;
      width:40%; height:140%;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,.35),transparent);
      filter:blur(1px); opacity:.5;
      transform:translateX(-150%) skewX(-15deg);
      animation:shine 2.2s ease-in-out infinite;
    }
    .field-err{ border-color:#ef4444 !important; }
  </style>

  <meta name="description" content="Create your Magnus account. Simple, secure form with a confirmation popup and instant redirect to the official signup link." />

  <!-- JSON-LD Schema (WebPage + Breadcrumb + RegisterAction) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebPage",
    "name":"Register — Magnus Platform",
    "description":"Create your Magnus account. Simple, secure form with a confirmation popup and instant redirect.",
    "url": "https://example.com/register.html",
    "breadcrumb": {
      "@type":"BreadcrumbList",
      "itemListElement":[
        {"@type":"ListItem","position":1,"name":"Home","item":"https://example.com/"},
        {"@type":"ListItem","position":2,"name":"Register","item":"https://example.com/register.html"}
      ]
    },
    "potentialAction": {
      "@type":"RegisterAction",
      "target": {
        "@type":"EntryPoint",
        "urlTemplate":"https://example.com/register.html?to={signupLink}",
        "inLanguage":"en",
        "actionPlatform":[
          "http://schema.org/DesktopWebPlatform",
          "http://schema.org/MobileWebPlatform"
        ]
      },
      "name":"Create Magnus Account"
    }
  }
  </script>
</head>
<body class="selection:bg-brand/30 selection:text-white/90">
  <header class="sticky top-0 z-30 backdrop-blur bg-black/30 border-b border-white/10">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between">
      <a href="./" class="flex items-center gap-2" aria-label="Back to Magnus home">
        <div class="w-8 h-8 rounded-xl grid place-items-center bg-gradient-to-br from-brand to-brand2 font-bold">M</div>
        <span class="font-semibold">Magnus Platform</span>
      </a>
      <a href="./" class="px-3 py-1.5 rounded-lg hover:bg-white/10">Home</a>
    </div>
  </header>

  <main class="px-4">
    <section class="max-w-4xl mx-auto py-10">
      <div class="text-center mb-8">
        <h1 class="text-3xl sm:text-4xl font-extrabold">Create your account</h1>
        <p class="text-white/80 mt-2">Join Magnus and start earning with smartphone tasks, streaming, and fair referrals. It takes less than 2 minutes to set up—your dashboard, wallet, and starter tasks are ready.</p>
      </div>

      <!-- Action Timer Banner -->
      <div class="glass p-4 sm:p-5 mb-6 flex flex-col sm:flex-row items-center justify-between gap-3">
        <div class="flex items-center gap-3">
          <div class="grid place-items-center w-10 h-10 rounded-xl bg-white/10">⏳</div>
          <div>
            <p class="text-sm text-white/70">Action Timer</p>
            <p class="font-semibold leading-tight">Complete your registration before the timer ends to secure today’s bonus tasks.</p>
          </div>
        </div>
        <div class="text-2xl font-bold tracking-wider tabular-nums" id="ctaTimer" aria-live="polite">30:00</div>
      </div>

      <!-- Small persuasive write-up -->
      <div class="glass p-5 sm:p-6 mb-6">
        <h2 class="text-xl font-semibold mb-2">Why register now?</h2>
        <ul class="space-y-2 text-white/85">
          <li>✅ Get instant access to beginner-friendly tasks and streaming jobs.</li>
          <li>✅ Earn welcome credits and unlock daily streak bonuses.</li>
          <li>✅ Transparent NGN withdrawals and 24/7 support.</li>
        </ul>
        <p class="mt-3 text-white/75">Registration is free. You’ll be redirected to our secure signup link to finalize your account.</p>
      </div>

      <form id="regForm" novalidate class="glass p-6 sm:p-8 shadow-goldGlow animate-reveal">
        <div class="grid sm:grid-cols-2 gap-4">
          <div class="sm:col-span-2">
            <label for="fullName" class="block text-sm mb-1">Full name</label>
            <input id="fullName" name="fullName" required autocomplete="name"
                   class="w-full px-4 py-2.5 rounded-lg bg-white/10 border border-white/15 focus:outline-none focus:ring-2 focus:ring-white/30" />
            <p class="mt-1 text-xs text-red-400 hidden"></p>
          </div>

          <div>
            <label for="email" class="block text-sm mb-1">Email</label>
            <input id="email" name="email" type="email" required autocomplete="email"
                   class="w-full px-4 py-2.5 rounded-lg bg-white/10 border border-white/15 focus:outline-none focus:ring-2 focus:ring-white/30" />
            <p class="mt-1 text-xs text-red-400 hidden"></p>
          </div>

          <div>
            <label for="phone" class="block text-sm mb-1">Phone (Nigeria format)</label>
            <input id="phone" name="phone" inputmode="tel" required
                   pattern="^(?:\+?234|0)[7-9]\d{9}$"
                   class="w-full px-4 py-2.5 rounded-lg bg-white/10 border border-white/15 focus:outline-none focus:ring-2 focus:ring-white/30"
                   placeholder="+2348012345678 or 08012345678" />
            <p class="mt-1 text-xs text-red-400 hidden"></p>
          </div>

          <div class="relative">
            <label for="password" class="block text-sm mb-1">Password</label>
            <input id="password" name="password" type="password" required
                   minlength="8" autocomplete="new-password"
                   class="w-full pr-12 px-4 py-2.5 rounded-lg bg-white/10 border border-white/15 focus:outline-none focus:ring-2 focus:ring-white/30"
                   placeholder="Min 8 chars incl. number" />
            <button type="button" data-toggle="password"
                    class="absolute right-2 top-8 px-3 py-1.5 rounded-md hover:bg-white/10 text-sm">Show</button>
            <p class="mt-1 text-xs text-white/70">Use at least 8 characters and include a number.</p>
            <p class="mt-1 text-xs text-red-400 hidden"></p>
          </div>

          <div class="relative">
            <label for="confirm" class="block text-sm mb-1">Confirm password</label>
            <input id="confirm" name="confirm" type="password" required autocomplete="new-password"
                   class="w-full pr-12 px-4 py-2.5 rounded-lg bg-white/10 border border-white/15 focus:outline-none focus:ring-2 focus:ring-white/30" />
            <button type="button" data-toggle="confirm"
                    class="absolute right-2 top-8 px-3 py-1.5 rounded-md hover:bg-white/10 text-sm">Show</button>
            <p class="mt-1 text-xs text-red-400 hidden"></p>
          </div>

          <!-- Honeypot (anti-bot) -->
          <div class="hidden">
            <label for="website">Website</label>
            <input id="website" name="website" autocomplete="off" />
          </div>

          <div class="sm:col-span-2 flex items-start gap-3">
            <input id="terms" name="terms" type="checkbox" required
                   class="mt-1 w-4 h-4 rounded border-white/20 bg-white/10" />
            <label for="terms" class="text-sm text-white/80">
              I agree to the <a href="#" class="underline hover:text-brand">Terms</a> and <a href="#" class="underline hover:text-brand">Privacy Policy</a>.
            </label>
          </div>
        </div>

        <div class="mt-6 flex gap-3">
          <button id="submitBtn" type="submit"
                  class="inline-flex px-6 py-3 rounded-xl bg-gradient-to-r from-brand to-brand2 shadow-goldGlow hover:shadow-xl transition">
            Create account
          </button>
          <a href="./" class="inline-flex px-6 py-3 rounded-xl border border-white/15 hover:bg-white/10">Cancel</a>
        </div>

        <p class="mt-4 text-xs text-white/60">We’ll never share your details without consent.</p>
      </form>
    </section>
  </main>

  <!-- Confirmation Modal -->
  <div id="modal" class="hidden fixed inset-0 z-50 flex items-center justify-center">
    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>
    <section class="relative w-[min(92%,640px)] glass shadow-goldGlow animate-reveal z-10">
      <div class="absolute inset-0 rounded-2-5xl sparkle" aria-hidden="true"></div>
      <div class="p-6 sm:p-7">
        <div class="flex items-center gap-3 mb-3">
          <div class="grid place-items-center w-11 h-11 rounded-xl glass">✅</div>
          <div>
            <p class="text-[11px] uppercase tracking-widest text-white/70">Registration</p>
            <h2 class="text-xl sm:text-2xl font-semibold">Account details saved</h2>
          </div>
        </div>

        <p class="text-white/85">
          You’ll be redirected to <span id="host" class="font-medium"></span> to complete setup.
        </p>

        <div class="mt-4 grid sm:grid-cols-2 gap-3 text-sm text-white/80">
          <div class="pill px-3 py-2 rounded-lg"><strong>Name:</strong> <span id="sumName"></span></div>
          <div class="pill px-3 py-2 rounded-lg"><strong>Email:</strong> <span id="sumEmail"></span></div>
          <div class="pill px-3 py-2 rounded-lg"><strong>Phone:</strong> <span id="sumPhone"></span></div>
        </div>

        <!-- Progress -->
        <div class="mt-6">
          <div class="flex items-center justify-between text-sm text-white/75 mb-1">
            <span>Redirecting in <span id="secs">5</span>s</span>
            <button id="copyBtn" class="hover:text-white">Copy link</button>
          </div>
          <div class="w-full h-2 bg-white/10 rounded-full overflow-hidden">
            <div id="bar" class="h-full bg-gradient-to-r from-brand to-brand2" style="width:0%"></div>
          </div>
        </div>

        <div class="mt-6 flex flex-col sm:flex-row gap-3">
          <button id="goBtn"
                  class="w-full sm:w-auto inline-flex justify-center px-5 py-2.5 rounded-xl bg-gradient-to-r from-brand to-brand2 shadow-goldGlow hover:shadow-xl transition">
            Continue now
          </button>
          <button id="closeBtn"
                  class="w-full sm:w-auto inline-flex justify-center px-5 py-2.5 rounded-xl border border-white/15 hover:bg-white/10">
            Stay here
          </button>
        </div>

        <p class="mt-4 text-xs text-white/60 break-all">
          Destination: <span id="dest" class="underline"></span>
        </p>
      </div>
    </section>
  </div>

  <footer class="py-8 text-center text-white/60 text-sm">
    © 2025 Magnus Platform
  </footer>

  <script>
    // ===== Utilities
    const qs = new URLSearchParams(location.search);
    const DEFAULT_TO = './#register';

    function sanitizeUrl(u){
      try {
        const url = new URL(u, location.href);
        if (url.protocol === 'http:' || url.protocol === 'https:') return url.href;
      } catch(e){}
      return null;
    }
    function destFromQuery(){ return sanitizeUrl(qs.get('to')) || DEFAULT_TO; }
    function hostOf(href){ try { return new URL(href).host || href; } catch { return href; } }

    // ===== 30-min Action Timer (motivational only)
    const ctaTimerEl = document.getElementById('ctaTimer');
    let remaining = 30 * 60; // seconds
    function formatMMSS(s){
      const m = Math.floor(s/60).toString().padStart(2,'0');
      const sec = (s%60).toString().padStart(2,'0');
      return `${m}:${sec}`;
    }
    ctaTimerEl.textContent = formatMMSS(remaining);
    const ctaInterval = setInterval(()=>{
      remaining = Math.max(0, remaining - 1);
      ctaTimerEl.textContent = formatMMSS(remaining);
      if (remaining === 0) clearInterval(ctaInterval);
    }, 1000);

    // ===== Form refs
    const form = document.getElementById('regForm');
    const submitBtn = document.getElementById('submitBtn');

    const fullName = document.getElementById('fullName');
    const email = document.getElementById('email');
    const phone = document.getElementById('phone');
    const password = document.getElementById('password');
    const confirmPw = document.getElementById('confirm');
    const terms = document.getElementById('terms');
    const website = document.getElementById('website'); // honeypot

    // Draft save to localStorage
    const draftKey = 'magnus_reg_draft_v2';
    function saveDraft(){
      const data = {
        fullName: fullName.value,
        email: email.value,
        phone: phone.value
      };
      localStorage.setItem(draftKey, JSON.stringify(data));
    }
    function loadDraft(){
      const raw = localStorage.getItem(draftKey);
      if (!raw) return;
      try{
        const d = JSON.parse(raw);
        fullName.value = d.fullName || '';
        email.value = d.email || '';
        phone.value = d.phone || '';
      }catch{}
    }
    ['input','change'].forEach(evt => form.addEventListener(evt, saveDraft));
    loadDraft();

    // Show/Hide password toggles
    document.querySelector('[data-toggle="password"]').addEventListener('click', (e)=>{
      const is = password.type === 'password';
      password.type = is ? 'text' : 'password';
      e.currentTarget.textContent = is ? 'Hide' : 'Show';
    });
    document.querySelector('[data-toggle="confirm"]').addEventListener('click', (e)=>{
      const is = confirmPw.type === 'password';
      confirmPw.type = is ? 'text' : 'password';
      e.currentTarget.textContent = is ? 'Hide' : 'Show';
    });

    function showErr(input, msg){
      input.classList.add('field-err');
      const err = input.parentElement.querySelector('.text-xs.text-red-400');
      if (err){ err.textContent = msg; err.classList.remove('hidden'); }
    }
    function clearErr(input){
      input.classList.remove('field-err');
      const err = input.parentElement.querySelector('.text-xs.text-red-400');
      if (err){ err.textContent = ''; err.classList.add('hidden'); }
    }

    // Validators
    function validate(){
      let ok = true;
      [fullName,email,phone,password,confirmPw,terms].forEach(i=>clearErr(i));

      if (!fullName.value.trim()){
        showErr(fullName,'Please enter your full name.');
        ok = false;
      }
      if (!email.validity.valid){
        showErr(email,'Enter a valid email address.');
        ok = false;
      }
      if (!phone.value.trim() || !/^(?:\+?234|0)[7-9]\d{9}$/.test(phone.value)){
        showErr(phone,'Use NG format: +2348012345678 or 08012345678.');
        ok = false;
      }
      if (password.value.length < 8 || !/\d/.test(password.value)){
        showErr(password,'Min 8 characters and include a number.');
        ok = false;
      }
      if (confirmPw.value !== password.value){
        showErr(confirmPw,'Passwords do not match.');
        ok = false;
      }
      if (!terms.checked){
        showErr(terms,'You must agree to continue.');
        ok = false;
      }
      if (website.value){ ok = false; } // honeypot
      return ok;
    }

    // ===== Modal + redirect
    const modal = document.getElementById('modal');
    const elHost = document.getElementById('host');
    const elDest = document.getElementById('dest');
    const elSumName = document.getElementById('sumName');
    const elSumEmail = document.getElementById('sumEmail');
    const elSumPhone = document.getElementById('sumPhone');

    const elSecs = modal.querySelector('#secs');
    const elBar  = modal.querySelector('#bar');
    const goBtn  = document.getElementById('goBtn');
    const closeBtn = document.getElementById('closeBtn');
    const copyBtn = document.getElementById('copyBtn');

    let target = destFromQuery();
    let timer = null;
    const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    function openModal(){
      elSumName.textContent  = fullName.value.trim();
      elSumEmail.textContent = email.value.trim();
      elSumPhone.textContent = phone.value.trim();
      elHost.textContent     = hostOf(target);
      elDest.textContent     = target;

      modal.classList.remove('hidden');

      let total = 5, left = total;
      elSecs.textContent = left;
      elBar.style.width = '0%';
      if (!reduced) elBar.style.transition = 'width .8s cubic-bezier(.2,.7,.2,1)';

      timer = setInterval(()=>{
        left--;
        if (left < 0){
          clearInterval(timer);
          window.location.href = target;
          return;
        }
        elSecs.textContent = left;
        elBar.style.width = ((total-left)/total*100) + '%';
      }, 1000);
    }

    function closeModal(){
      modal.classList.add('hidden');
      if (timer) { clearInterval(timer); timer = null; }
    }

    goBtn.addEventListener('click', ()=>{
      if (timer) clearInterval(timer);
      window.location.href = target;
    });
    closeBtn.addEventListener('click', closeModal);
    copyBtn.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(target);
        copyBtn.textContent = 'Copied!';
        setTimeout(()=>copyBtn.textContent = 'Copy link', 1200);
      }catch{
        copyBtn.textContent = 'Copy failed';
        setTimeout(()=>copyBtn.textContent = 'Copy link', 1200);
      }
    });

    // Submit
    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      if (submitBtn.disabled) return;

      if (!validate()) return;

      submitBtn.disabled = true;
      submitBtn.classList.add('opacity-70','cursor-not-allowed');

      setTimeout(()=>{
        localStorage.removeItem(draftKey);
        openModal();
      }, 300);
    });

    // Dismiss modal with ESC
    document.addEventListener('keydown', (e)=>{
      if (e.key === 'Escape' && !modal.classList.contains('hidden')) closeModal();
    });
  </script>
</body>
</html>
